子网划分的两个例子
 
例1：本例通过子网数来划分子网，未考虑主机数。
一家集团公司有12家子公司，每家子公司又有4个部门。上级给出一个172.16.0.0/16的网段，让给每家子公司以及子公司的部门分配网段。
思路：既然有12家子公司，那么就要划分12个子网段，但是每家子公司又有4个部门，因此又要在每家子公司所属的网段中划分4个子网分配给各部门。
步骤：
A. 先划分各子公司的所属网段。
有12家子公司，那么就有2的n次方≥12，n的最小值=4。因此，网络位需要向主机位借4位。那么就可以从172.16.0.0/16这个大网段中划出2的4次方=16个子网。
详细过程：
先将172.16.0.0/16用二进制表示
10101100.00010000.00000000.00000000/16
借4位后（可划分出16个子网）：
1)   10101100.00010000.00000000.00000000/20【172.16.0.0/20】
2)   10101100.00010000.00010000.00000000/20【172.16.16.0/20】
3)   10101100.00010000.00100000.00000000/20【172.16.32.0/20】
4)   10101100.00010000.00110000.00000000/20【172.16.48.0/20】
5)   10101100.00010000.01000000.00000000/20【172.16.64.0/20】
6)   10101100.00010000.01010000.00000000/20【172.16.80.0/20】
7)   10101100.00010000.01100000.00000000/20【172.16.96.0/20】
8)   10101100.00010000.01110000.00000000/20【172.16.112.0/20】
9)   10101100.00010000.10000000.00000000/20【172.16.128.0/20】
10) 10101100.00010000.10010000.00000000/20【172.16.144.0/20】
11) 10101100.00010000.10100000.00000000/20【172.16.160.0/20】
12) 10101100.00010000.10110000.00000000/20【172.16.176.0/20】
13) 10101100.00010000.11000000.00000000/20【172.16.192.0/20】
14) 10101100.00010000.11010000.00000000/20【172.16.208.0/20】
15) 10101100.00010000.11100000.00000000/20【172.16.224.0/20】
16) 10101100.00010000.11110000.00000000/20【172.16.240.0/20】
我们从这16个子网中选择12个即可，就将前12个分给下面的各子公司。每个子公司最多容纳主机数目为2的12次方-2=4094。
 
B. 再划分子公司各部门的所属网段
以甲公司获得172.16.0.0/20为例，其他子公司的部门网段划分同甲公司。
有4个部门，那么就有2的n次方≥4，n的最小值=2。因此，网络位需要向主机位借2位。那么就可以从172.16.0.0/20这个网段中再划出2的2次方=4个子网，正符合要求。
详细过程：
先将172.16.0.0/20用二进制表示
10101100.00010000.00000000.00000000/20
借2位后（可划分出4个子网）：
① 10101100.00010000.00000000.00000000/22【172.16.0.0/22】
② 10101100.00010000.00000100.00000000/22【172.16.4.0/22】
③ 10101100.00010000.00001000.00000000/22【172.16.8.0/22】
④ 10101100.00010000.00001100.00000000/22【172.16.12.0/22】
将这4个网段分给甲公司的4个部门即可。每个部门最多容纳主机数目为2的10次方-2=1024。
 
例2：本例通过计算主机数来划分子网。
某集团公司给下属子公司甲分配了一段IP地址192.168.5.0/24，现在甲公司有两层办公楼（1楼和2楼），统一从1楼的路由器上公网。1楼有100台电脑联网，2楼有53台电脑联网。如果你是该公司的网管，你该怎么去规划这个IP？
根据需求，画出下面这个简单的拓扑。将192.168.5.0/24划成3个网段，1楼一个网段，至少拥有101个可用IP地址；2楼一个网段，至少拥有54个可用IP地址；1楼和2楼的路由器互联用一个网段，需要2个IP地址。
clip_image002
思路:我们在划分子网时优先考虑最大主机数来划分。在本例中，我们就先使用最大主机数来划分子网。101个可用IP地址，那就要保证至少7位的主机位可用（2的m次方-2≥101，m的最小值=7）。如果保留7位主机位，那就只能划出两个网段，剩下的一个网段就划不出来了。但是我们剩下的一个网段只需要2个IP地址并且2楼的网段只需要54个可用IP，因此，我们可以从第一次划出的两个网段中选择一个网段来继续划分2楼的网段和路由器互联使用的网段。
步骤：
A. 先根据大的主机数需求，划分子网
因为要保证1楼网段至少有101个可用IP地址，所以，主机位要保留至少7位。
先将192.168.5.0/24用二进制表示：
11000000.10101000.00000101.00000000/24
主机位保留7位，即在现有基础上网络位向主机位借1位（可划分出2个子网）：
① 11000000.10101000.00000101.00000000/25【192.168.5.0/25】
② 11000000.10101000.00000101.10000000/25【192.168.5.128/25】
1楼网段从这两个子网段中选择一个即可，我们选择192.168.5.0/25。
2楼网段和路由器互联使用的网段从192.168.5.128/25中再次划分得到。
 
B. 再划分2楼使用的网段
2楼使用的网段从192.168.5.128/25这个子网段中再次划分子网获得。因为2楼至少要有54个可用IP地址，所以，主机位至少要保留6位（2的m次方-2≥54，m的最小值=6）。
先将192.168.5.128/25用二进制表示：
11000000.10101000.00000101.10000000/25
主机位保留6位，即在现有基础上网络位向主机位借1位（可划分出2个子网）：
① 11000000.10101000.00000101.10000000/26【192.168.5.128/26】
② 11000000.10101000.00000101.11000000/26【192.168.5.192/26】
2楼网段从这两个子网段中选择一个即可，我们选择192.168.5.128/26。
路由器互联使用的网段从192.168.5.192/26中再次划分得到。
 
C. 最后划分路由器互联使用的网段
路由器互联使用的网段从192.168.5.192/26这个子网段中再次划分子网获得。因为只需要2个可用IP地址，所以，主机位只要保留2位即可（2的m次方-2≥2，m的最小值=2）。
先将192.168.5.192/26用二进制表示：
11000000.10101000.00000101.11000000/26
主机位保留2位，即在现有基础上网络位向主机位借4位（可划分出16个子网）：
① 11000000.10101000.00000101.11000000/30【192.168.5.192/30】
② 11000000.10101000.00000101.11000100/30【192.168.5.196/30】
③ 11000000.10101000.00000101.11001000/30【192.168.5.200/30】
…………………………………
④ 11000000.10101000.00000101.11110100/30【192.168.5.244/30】
⑤ 11000000.10101000.00000101.11111000/30【192.168.5.248/30】
⑥ 11000000.10101000.00000101.11111100/30【192.168.5.252/30】
路由器互联网段我们从这16个子网中选择一个即可，我们就选择192.168.5.252/30。
 
D. 整理本例的规划地址
1楼：
网络地址：【192.168.5.0/25】
主机IP地址：【192.168.5.1/25―192.168.5.126/25】
广播地址：【192.168.5.127/25】
2楼：
网络地址：【192.168.5.128/26】
主机IP地址：【192.168.5.129/26―192.168.5.190/26】
广播地址：【192.168.5.191/26】
路由器互联：
网络地址：【192.168.5.252/30】
两个IP地址：【192.168.5.253/30、192.168.5.254/30】
广播地址：【192.168.5.255/30】
 
快速划分子网确定IP
我们以例2为例：
题目需要我们将192.168.5.0/24这个网络地址划分成能容纳101/54/2个主机的子网。因此我们要先确定主机位，然后根据主机位决定网络位，最后确定详细的IP地址。
① 确定主机位
将所需要的主机数自大而小的排列出来：101/54/2，然后根据网络拥有的IP数目确定每个子网的主机位：如果2的n次方-2≥该网段的IP数目，那么主机位就等于n。于是，得到：7/6/2。
② 根据主机位决定网络位
用32减去主机位剩下的数值就是网络位，得到：25/26/30。
③ 确定详细的IP地址
在二进制中用网络位数值掩盖IP前面相应的位数，然后后面的为IP位。选取每个子网的第一个IP为网络地址，最后一个为广播地址，之间的为有效IP。得到：
【网络地址】 【有效IP】 【广播地址】
【192.168.5.0/25】【192.168.5.1/25-192.168.5.126/25】【192.168.5.127/25】
【192.168.5.128/26】【192.168.5.129/26-192.168.5.190/26】【192.168.5.191/26】
【192.168.5.192/30】【192.168.5.193/30-192.168.5.194/30】【192.168.5.195/30】