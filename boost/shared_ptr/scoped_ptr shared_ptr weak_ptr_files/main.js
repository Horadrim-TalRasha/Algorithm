!function(){var e=function(e){var n=e,o=!1;if(e.positions.length)for(i=0;i<e.positions.length;i++)"6103"===e.positions[i]&&0===e.status&&(o=!0);return o&&(n.positions=["6103"],n.status=1),n},n=function(e){var n=new Image,o="_img_"+Math.random();window[o]=n,n.onload=n.onerror=function(){window[o]=null},n.src=e},o={set:function(e,n,o){if("number"==typeof o.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*o.expires),o.expires=t}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",n,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")},get:function(e){for(var n,o=document.cookie?document.cookie.split("; "):[],t=/(%[0-9A-Z]{2})+/g,i=0;i<o.length;i++){var a=o[i].split("="),c=a[0].replace(t,decodeURIComponent),r=a.slice(1).join("=");if('"'===r.charAt(0)&&(r=r.slice(1,-1)),r=r.replace(t,decodeURIComponent),e===c){n=r;break}e||(n[c]=r)}return n}},t={advertLoad:[]},a=function(i,a,c,r,d,p){if(!(window.location.protocol&&window.location.protocol.indexOf("file:")>=0)){var s=function(e){var n={client_id:c};i.ajax({url:"http://changyan.sohu.com/api/2/user/info",cache:!1,dataType:"jsonp",data:n,success:function(n){e(n)},error:function(){e()}})},l=function(e,o){var a="",o=o||0;window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready?window.changyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(a=n)}):window.cyan&&window.cyan.api&&"function"==typeof window.cyan.api.ready&&window.cyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(a=n)});var s=function(e,n,t,r,d,p,s,l,u,g,f){var y={appId:c,advertId:e,agencyType:n,pce:t,tag:r,ref:d,uuid:a,uid:o};void 0!==p&&(y.rtbAdId=p),void 0!==s&&(y.winNoticeUrl=s),void 0!==l&&(y.dspId=l),void 0!==u&&(y.type=u),void 0!==g&&(y.category=g),void 0!==f&&(y.isCookieMapping=f),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/pv",dataType:"jsonp",data:y})},l=function(e,n,t,i,r,d,p,s,l,u,g){var f={appId:c,advertId:e,agencyType:n,pce:t,tag:i,ref:r,category:u,uuid:a,uid:o};void 0!==d&&(f.rtbAdId=d),void 0!==p&&(f.dspId=p),void 0!==s&&(f.isCookieMapping=s),void 0!==l&&(f.type=l),void 0!==g&&(f.landingUrl=g);var y,h="http://e.changyan.sohu.com/dataService/v2/click?";for(y in f)h+=y+"="+window.encodeURIComponent(f[y])+"&";h.substring(0,h.length-1),window.open(h)},u={appId:c,category:r,title:d,url:p,position:e,uuid:a,uid:o};1607===u.position&&(u.isLeft=!0),1608===u.position&&(u.isLeft=!1,u.position=1607),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:u,dataType:"jsonp",success:function(e){if(0===e.code){var r={};("RTB"===e.agencyType||"AGENCY"===e.agencyType)&&(r=i.parseJSON(e.advertContent),function(){r.exposure_urls instanceof window.Array&&i.each(r.exposure_urls,function(e,o){o.exposureUrl instanceof window.Array&&"number"==typeof o.timeMillis&&window.setTimeout(function(){i.each(o.exposureUrl,function(e,o){n(o)})},1*o.timeMillis)})}()),e.cookieMappingList&&e.cookieMappingList.length&&i.each(e.cookieMappingList,function(e,o){n(o)}),s(e.advertId,e.agencyType,e.pce,e.tag,e.ref,r.rtbAdId,r.winNoticeUrl,r.dspId,r.type,r.category,r.isCookieMapping),e.params=u,e.sendClickLog=function(){"RTB"===e.agencyType&&r.clickUrls&&r.clickUrls.length&&i.each(r.clickUrls,function(e,o){n(o)}),l(e.advertId,e.agencyType,e.pce,e.tag,e.ref,r.rtbAdId,r.dspId,r.cookieMapping,r.type,r.category,r.landingUrl)},e.statVisibility=function(t){var d={IMAGE:"0",FLASH:"1",JS:"3",IFRAME:"5"},p={appId:c,advertId:e.advertId,agencyType:e.agencyType,showType:d[e.advertType],uuid:a,uid:o};"RTB"===e.agencyType&&(p=i.extend(p,{rtbAdId:r.rtbAdId,dspId:r.dspId}));var s="http://e.changyan.sohu.com/dataService/v2/visibility?",l=!1,u=i(window);u.on("scroll.ad"+e.params.position,function(){var e=t.offset().top-u.height()+t.height()/2;u.scrollTop()>=e&&u.scrollTop()<=e+u.height()&&(l||(window.setTimeout(function(){if(u.scrollTop()>=e&&u.scrollTop()<=e+u.height()){p=i.extend(p,{screenWidth:u.width(),screenHeight:u.height(),Xcoordinate:t.offset().left,Ycoordinate:t.offset().top});var o;for(o in p)s+=o+"="+decodeURIComponent(p[o])+"&";n(s.substring(0,s.length-1))}else l=!1},1e3),l=!0))})};var d,p=t.advertLoad;for(d=0;d<p.length;d++)p[d](e)}}})},u=function(e){i.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:c},dataType:"jsonp",success:function(n){0===n.code&&"function"==typeof e&&e(n)}})};u(function(n){n=e(n);var t,c=!1;for(t=0;t<n.positions.length;t++)"6103"===n.positions[t]&&(c=!0);if(n&&1===n.status){if(n.disabledChannels&&n.disabledChannels.length){var d=!0;if(function(){var e;for(e=0;e<n.disabledChannels.length;e++)n.disabledChannels[e]===r&&(d=!1)}(),d===!1&&!c)return;d===!1&&c&&(n.positions=["6103"])}if(n.positions&&n.positions.length){var p=function(e){var o,t;for(o=0;o<n.positions.length;o++)t=parseInt(n.positions[o],10),"wap"===a&&5e3>t||"pc"===a&&t>5e3||!("pc"===a&&1530===t&&!document.getElementById("SOHUCS")||"pc"===a&&1103===t&&(!i("#SOHUCS #SOHU_MAIN .list-newest-w .block-cont-gw").length||i("#SOHUCS #SOHU_MAIN .list-newest-w .block-cont-gw").length<5)||"wap"===a&&6103===t&&(!i("#SOHUCS #cy-latest-list-wrapper article").length||i("#SOHUCS #cy-latest-list-wrapper article").length<5)||!l(t,e))};"mark"===o.get("cy-mark")?s(function(e){var n;e&&e.user_id?n=e.user_id:o.set("cy-mark",null,{expires:-1,path:"/"}),p(n)}):(p(),window.setTimeout(function(){s(function(e){e&&e.user_id&&o.set("cy-mark","mark",{expires:30,path:"/"})})},5e3))}}})}},c=function(e){if(window.XMLHttpRequest){var n=e.type,o=e.appId,t="null",i=window.document.title,c=window.location.href;"pc"!==n&&"wap"!==n&&(n="pc"),e.hasOwnProperty("categoryId")&&void 0!==e.categoryId&&(t=e.categoryId),e.hasOwnProperty("title")&&(i=e.title),e.hasOwnProperty("url")&&(c=e.url),a(window.changyanjQuery||window.cyanZepto||window.jQuery,n,o,t,i,c)}};c.on=function(e,n){t[e]&&"function"==typeof n&&t[e].push(n)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=c)}();